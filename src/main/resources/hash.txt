
var MessageDigest = Packages.java.security.MessageDigest;
var FileInputStream = Packages.java.io.FileInputStream;
var Message = Packages.org.by1337.bairdrop.util.Message

function get() {
var jarFilePath = BAirDrop.instance.getFile().getAbsolutePath();

var digest = MessageDigest.getInstance("SHA-256");

var fis = new FileInputStream(jarFilePath);
var buffer = java.lang.reflect.Array.newInstance(java.lang.Byte.TYPE, 1024);
var bytesRead;
while ((bytesRead = fis.read(buffer)) !== -1) {
digest.update(buffer, 0, bytesRead);
}
fis.close();

var hashBytes = digest.digest();


var hashBuilder = new java.lang.StringBuilder();
for (var i = 0; i < hashBytes.length; i++) {
var hex = java.lang.Integer.toHexString(0xff & hashBytes[i]);
if (hex.length() === 1) {
hashBuilder.append('0');
}
hashBuilder.append(hex);
}
var hash = hashBuilder.toString();
Message.logger(hash);

return hash;
}

get();